"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var __chunk_1=require("../vendor.js"),script={componentName:"label-wrap",data:function(){return{computedWidth:0}},props:{isAutoWidth:Boolean,updateAll:Boolean},inject:["uiForm","uiFormItem"],methods:{getLabelWidth:function(){if(this.$el&&this.$el.firstElementChild){var t=window.getComputedStyle(this.$el.firstElementChild).width;return Math.ceil(parseFloat(t))}return 0},updateLabelWidth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update";this.$slots.default&&this.isAutoWidth&&this.$el.firstElementChild&&("update"===t?this.computedWidth=this.getLabelWidth():"remove"===t&&this.uiForm.deregisterLabelWidth(this.computedWidth))}},computed:{style:function(){var t={},e=this.uiForm.autoLabelWidth;if(e&&"auto"!==e){var i=parseInt(e,10)-this.computedWidth;i&&(t.marginLeft=i+"px")}return t}},watch:{computedWidth:function(t,e){this.updateAll&&(this.uiForm.registerLabelWidth(t,e),this.uiFormItem.updateComputedLabelWidth(t))}},mounted:function(){this.updateLabelWidth("update")},updated:function(){this.updateLabelWidth("update")},beforeDestroy:function(){this.updateLabelWidth("remove")}};const __vue_script__=script;var __vue_render__=function(){var t=this.$createElement,e=this._self._c||t;return this.$slots.default?e("div",{staticClass:"ui-form-item__label-wrap"},[e("div",{staticClass:"ui-form-item__label-wrap",style:this.style},[this._v("\n        "+this._s(this.$slots.default)+"\n    ")])]):e("div")},__vue_staticRenderFns__=[];const __vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1;var LabelWrap=__chunk_1.__vue_normalize__({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},void 0,__vue_script__,void 0,!1,void 0,void 0,void 0),script$1={name:"ui-form-item",componentName:"ui-form-item",mixins:[__chunk_1.cls],components:{LabelWrap:LabelWrap},provide:function(){return{uiFormItem:this}},inject:["uiForm"],data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:""}},props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},watch:{error:{immediate:!0,handler:function(t){this.validateMessage=t,this.validateState=t?"error":""}},validateStatus:function(t){this.validateState=t}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var t={};if("top"===this.form.labelPosition)return t;var e=this.labelWidth||this.form.labelWidth;return e&&(t.width=e),t},contentStyle:function(){var t={},e=this.label;if("top"===this.form.labelPosition||this.form.inline)return t;if(!e&&!this.labelWidth&&this.isNested)return t;var i=this.labelWidth||this.form.labelWidth;return"auto"===i?"auto"===this.labelWidth?t.marginLeft=this.computedLabelWidth:"auto"===this.form.labelWidth&&(t.marginLeft=this.elForm.autoLabelWidth):t.marginLeft=i,t},form:function(){for(var t=this.$parent,e=t.$options.componentName;"ui-form"!==e;)"ui-form-item"===e&&(this.isNested=!0),e=(t=t.$parent).$options.componentName;return t},fieldValue:function(){var t=this.form.model;if(t&&this.prop){var e=this.prop;return-1!==e.indexOf(":")&&(e=e.replace(/:/,".")),getPropByPath(t,e,!0).v}},isRequired:function(){var t=this.getRules(),e=!1;return t&&t.length&&t.every(function(t){return!t.required||(e=!0,!1)}),e},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return this.elFormItemSize||(this.$ELEMENT||{}).size}},methods:{validate:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:noop;this.validateDisabled=!1;var a=this.getFilteredRule(t);if((!a||0===a.length)&&void 0===this.required)return i(),!0;this.validateState="validating";var r={};a&&a.length>0&&a.forEach(function(t){delete t.trigger}),r[this.prop]=a;var s=new AsyncValidator(r),l={};l[this.prop]=this.fieldValue,s.validate(l,{firstFields:!0},function(t,a){e.validateState=t?"error":"success",e.validateMessage=t?t[0].message:"",i(e.validateMessage,a),e.elForm&&e.elForm.$emit("validate",e.prop,!t,e.validateMessage||null)})},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){var t=this;this.validateState="",this.validateMessage="";var e=this.form.model,i=this.fieldValue,a=this.prop;-1!==a.indexOf(":")&&(a=a.replace(/:/,"."));var r=getPropByPath(e,a,!0);this.validateDisabled=!0,Array.isArray(i)?r.o[r.k]=[].concat(this.initialValue):r.o[r.k]=this.initialValue,this.$nextTick(function(){t.validateDisabled=!1}),this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var t=this.form.rules,e=this.rules,i=void 0!==this.required?{required:!!this.required}:[],a=getPropByPath(t,this.prop||"");return t=t?a.o[this.prop||""]||a.v:[],[].concat(e||t||[]).concat(i)},getFilteredRule:function(t){return this.getRules().filter(function(e){return!e.trigger||""===t||(Array.isArray(e.trigger)?e.trigger.indexOf(t)>-1:e.trigger===t)}).map(function(t){return objectAssign({},t)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},updateComputedLabelWidth:function(t){this.computedLabelWidth=t?"".concat(t,"px"):""},addValidateEvents:function(){(this.getRules().length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))},removeValidateEvents:function(){this.$off()}},mounted:function(){}};const __vue_script__$1=script$1;var __vue_render__$1=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.prefixCls+"-form-item"]},[i("label-wrap",{attrs:{"is-auto-width":t.labelStyle&&"auto"===t.labelStyle.width,"update-all":"auto"===t.form.labelWidth}},[t.label||t.$slots.label?i("label",{staticClass:"ui-form-item__label",style:t.labelStyle,attrs:{for:t.labelFor}},[t._v("\n            "+t._s(t.label+t.form.labelSuffix)+"\n        ")]):t._e()])],1)},__vue_staticRenderFns__$1=[];const __vue_inject_styles__$1=void 0,__vue_scope_id__$1=void 0,__vue_module_identifier__$1=void 0,__vue_is_functional_template__$1=!1;var FormItem=__chunk_1.__vue_normalize__({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},void 0,__vue_script__$1,void 0,!1,void 0,void 0,void 0);FormItem.install=function(t){t.component(FormItem.name,FormItem)},exports.default=FormItem;
